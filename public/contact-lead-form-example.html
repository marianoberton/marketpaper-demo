<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ejemplo - Formulario de Contact Leads FOMO</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        .form-container {
            background: white;
            border-radius: 12px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            padding: 40px;
            max-width: 500px;
            width: 100%;
        }
        
        .form-header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .form-header h1 {
            color: #333;
            font-size: 28px;
            margin-bottom: 8px;
        }
        
        .form-header p {
            color: #666;
            font-size: 16px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            font-weight: 600;
            color: #333;
            margin-bottom: 6px;
            font-size: 14px;
        }
        
        input, textarea, select {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #e1e5e9;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s ease;
            background: #fff;
        }
        
        input:focus, textarea:focus, select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        textarea {
            resize: vertical;
            min-height: 100px;
        }
        
        .required {
            color: #e74c3c;
        }
        
        .submit-btn {
            width: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 14px 20px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s ease, box-shadow 0.3s ease;
        }
        
        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }
        
        .submit-btn:disabled {
            opacity: 0.7;
            cursor: not-allowed;
            transform: none;
        }
        
        .success-message {
            background: #d4edda;
            color: #155724;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            border: 1px solid #c3e6cb;
            display: none;
        }
        
        .error-message {
            background: #f8d7da;
            color: #721c24;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            border: 1px solid #f5c6cb;
            display: none;
        }
        
        .utm-info {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
            font-size: 12px;
            color: #666;
        }
        
        .utm-info h4 {
            margin-bottom: 8px;
            color: #333;
        }
        
        @media (max-width: 600px) {
            .form-container {
                padding: 30px 20px;
            }
        }
    </style>
</head>
<body>
    <div class="form-container">
        <div class="form-header">
            <h1>🚀 Formulario de Contacto</h1>
            <p>Ejemplo de integración con FOMO Platform</p>
        </div>
        
        <div id="successMessage" class="success-message">
            ¡Gracias! Tu información ha sido enviada correctamente. Nos pondremos en contacto contigo pronto.
        </div>
        
        <div id="errorMessage" class="error-message">
            Hubo un error al enviar tu información. Por favor, inténtalo de nuevo.
        </div>
        
        <form id="contactForm">
            <div class="form-group">
                <label for="name">Nombre completo <span class="required">*</span></label>
                <input type="text" id="name" name="name" required>
            </div>
            
            <div class="form-group">
                <label for="email">Email <span class="required">*</span></label>
                <input type="email" id="email" name="email" required>
            </div>
            
            <div class="form-group">
                <label for="company">Empresa</label>
                <input type="text" id="company" name="company">
            </div>
            
            <div class="form-group">
                <label for="website">Sitio web</label>
                <input type="url" id="website" name="website" placeholder="https://example.com">
            </div>
            
            <div class="form-group">
                <label for="phone">Teléfono</label>
                <input type="tel" id="phone" name="phone">
            </div>
            
            <div class="form-group">
                <label for="source">¿Cómo nos conociste?</label>
                <select id="source" name="source">
                    <option value="">Selecciona una opción</option>
                    <option value="google_ads">Google Ads</option>
                    <option value="facebook_ads">Facebook Ads</option>
                    <option value="linkedin">LinkedIn</option>
                    <option value="referral">Referencia</option>
                    <option value="website">Sitio web</option>
                    <option value="email">Email marketing</option>
                    <option value="other">Otro</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="pain_point">¿Cuál es tu principal desafío empresarial? <span class="required">*</span></label>
                <textarea id="pain_point" name="pain_point" placeholder="Describe brevemente el principal problema que enfrentas en tu negocio..." required></textarea>
            </div>
            
            <div class="form-group">
                <label for="notes">Comentarios adicionales</label>
                <textarea id="notes" name="notes" placeholder="¿Hay algo más que te gustaría compartir?"></textarea>
            </div>
            
            <button type="submit" class="submit-btn" id="submitBtn">
                Enviar información
            </button>
        </form>
        
        <div class="utm-info">
            <h4>📊 Información de tracking automático:</h4>
            <p>Este formulario captura automáticamente información de marketing como UTM parameters, user agent, referrer e IP para análisis de conversión.</p>
            <p><strong>URL actual:</strong> <span id="currentUrl"></span></p>
            <p><strong>Referrer:</strong> <span id="referrerInfo"></span></p>
        </div>
    </div>

    <script>
        // Configuración - Cambia esta URL por tu endpoint real
        const WEBHOOK_URL = 'https://tu-dominio.vercel.app/api/webhook/contact-lead';
        
        // Mostrar información de tracking
        document.getElementById('currentUrl').textContent = window.location.href;
        document.getElementById('referrerInfo').textContent = document.referrer || 'Directo';
        
        // Función para extraer parámetros UTM
        function getUTMParameters() {
            const urlParams = new URLSearchParams(window.location.search);
            return {
                utm_source: urlParams.get('utm_source'),
                utm_medium: urlParams.get('utm_medium'),
                utm_campaign: urlParams.get('utm_campaign'),
                utm_term: urlParams.get('utm_term'),
                utm_content: urlParams.get('utm_content')
            };
        }
        
        // Función para obtener información técnica
        function getTechnicalInfo() {
            return {
                user_agent: navigator.userAgent,
                referrer: document.referrer || null,
                // IP se obtiene automáticamente en el servidor
                page_url: window.location.href
            };
        }
        
        // Manejar envío del formulario
        document.getElementById('contactForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const submitBtn = document.getElementById('submitBtn');
            const successMessage = document.getElementById('successMessage');
            const errorMessage = document.getElementById('errorMessage');
            
            // Ocultar mensajes previos
            successMessage.style.display = 'none';
            errorMessage.style.display = 'none';
            
            // Deshabilitar botón
            submitBtn.disabled = true;
            submitBtn.textContent = 'Enviando...';
            
            try {
                // Recopilar datos del formulario
                const formData = new FormData(this);
                const data = Object.fromEntries(formData.entries());
                
                // Añadir información UTM y técnica
                const utmParams = getUTMParameters();
                const techInfo = getTechnicalInfo();
                
                const payload = {
                    ...data,
                    ...utmParams,
                    ...techInfo,
                    // Campos adicionales que puedes personalizar
                    lead_source_detail: 'contact_form_example',
                    form_version: '1.0'
                };
                
                console.log('Enviando payload:', payload);
                
                // Enviar al webhook
                const response = await fetch(WEBHOOK_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(payload)
                });
                
                if (response.ok) {
                    const result = await response.json();
                    console.log('Respuesta exitosa:', result);
                    
                    successMessage.style.display = 'block';
                    this.reset(); // Limpiar formulario
                    
                    // Scroll al mensaje de éxito
                    successMessage.scrollIntoView({ behavior: 'smooth' });
                    
                } else {
                    throw new Error(`Error ${response.status}: ${response.statusText}`);
                }
                
            } catch (error) {
                console.error('Error al enviar:', error);
                errorMessage.style.display = 'block';
                errorMessage.scrollIntoView({ behavior: 'smooth' });
            } finally {
                // Rehabilitar botón
                submitBtn.disabled = false;
                submitBtn.textContent = 'Enviar información';
            }
        });
        
        // Ejemplo de tracking de eventos adicionales
        document.addEventListener('DOMContentLoaded', function() {
            // Tracking de tiempo en página
            const startTime = Date.now();
            
            window.addEventListener('beforeunload', function() {
                const timeOnPage = Math.round((Date.now() - startTime) / 1000);
                
                // Podrías enviar esta información a tu sistema de analytics
                console.log(`Tiempo en página: ${timeOnPage} segundos`);
            });
            
            // Tracking de interacciones con campos
            const formFields = document.querySelectorAll('input, textarea, select');
            formFields.forEach(field => {
                field.addEventListener('focus', function() {
                    console.log(`Campo enfocado: ${this.name}`);
                });
            });
        });
        
        // Función de demostración para testing
        function fillDemoData() {
            document.getElementById('name').value = 'Juan Pérez Demo';
            document.getElementById('email').value = 'juan.demo@example.com';
            document.getElementById('company').value = 'Empresa Demo SL';
            document.getElementById('website').value = 'https://demo.example.com';
            document.getElementById('phone').value = '+34 600 123 456';
            document.getElementById('source').value = 'website';
            document.getElementById('pain_point').value = 'Necesitamos optimizar nuestros procesos de ventas y mejorar el seguimiento de leads.';
            document.getElementById('notes').value = 'Estamos evaluando diferentes soluciones CRM.';
        }
        
        // Atajo para llenar datos de demo (Ctrl+D)
        document.addEventListener('keydown', function(e) {
            if (e.ctrlKey && e.key === 'd') {
                e.preventDefault();
                fillDemoData();
            }
        });
        
        console.log('🚀 Formulario de Contact Leads inicializado');
        console.log('💡 Presiona Ctrl+D para llenar datos de demo');
        console.log('🔧 Recuerda cambiar WEBHOOK_URL por tu endpoint real');
    </script>
</body>
</html> 